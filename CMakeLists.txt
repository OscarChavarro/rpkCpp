cmake_minimum_required(VERSION 3.10)
project(rpk)

# C++ warnings to enable and fix:
#-Wmaybe-uninitialized
#-Wparentheses
#-Wsign-compare
#-Wstrict-aliasing
#-Wuninitialized

add_compile_options(-Wdelete-non-virtual-dtor -Wunused-variable -Wunused-but-set-variable -Wunused-function -pedantic -std=c++11 -ffast-math -mavx512f)
include_directories(src)

set(MAIN_SRC
    src/common/linealAlgebra/Matrix4x4.cpp
    src/common/linealAlgebra/Vector3D.cpp
    src/common/dataStructures/Bintree.cpp
    src/common/dataStructures/CSList.cpp
    src/common/dataStructures/DList.cpp
    src/common/dataStructures/KDTree.cpp
    src/common/dataStructures/List.cpp
    src/common/dataStructures/Octree.cpp
    src/skin/bounds.cpp
    src/common/errorshared.cpp
    src/common/mymath.cpp
    src/io/FileUncompressWrapper.cpp
    src/QMC/faure.cpp
    src/QMC/halton.cpp
    src/QMC/nied31.cpp
    src/QMC/nied63.cpp
    src/QMC/scrambledhalton.cpp
    src/QMC/sobol.cpp
    src/BREP/BREP_CONTOUR.cpp
    src/BREP/BREP_EDGE.cpp
    src/BREP/BREP_FACE.cpp
    src/BREP/BREP_VERTEX.cpp
    src/BREP/BREP_WING.cpp
    src/BREP/brep_log.cpp
    src/BREP/BREP_VERTEX_OCTREE.cpp
    src/material/brdf.cpp
    src/material/bsdf.cpp
    src/material/btdf.cpp
    src/material/cie.cpp
    src/material/color.cpp
    src/material/edf.cpp
    src/material/Material.cpp
    src/material/materiallist.cpp
    src/material/statistics.cpp
    src/material/texture.cpp
    src/material/xxdf.cpp
    src/skin/Compound.cpp
    src/skin/Geometry.cpp
    src/skin/geomlist.cpp
    src/skin/hit.cpp
    src/skin/hitlist.cpp
    src/skin/Jacobian.cpp
    src/skin/Patch.cpp
    src/skin/PatchSet.cpp
    src/skin/MeshSurface.cpp
    src/skin/Vertex.cpp
    src/scene/VoxelData.cpp
    src/scene/Background.cpp
    src/scene/VoxelGrid.cpp
    src/scene/scene.cpp
    src/scene/spherical.cpp
    src/scene/splitbsdf.cpp
    src/scene/phong.cpp
    src/SGL/poly_clip.cpp
    src/SGL/poly_scan.cpp
    src/SGL/poly_scan_flat.cpp
    src/SGL/poly_scan_z.cpp
    src/SGL/sgl.cpp
    src/shared/SoftIdsWrapper.cpp
    src/shared/camera.cpp
    src/shared/canvas.cpp
    src/shared/cubature.cpp
    src/shared/discretesampling.cpp
    src/shared/hemirenderer.cpp
    src/shared/lightlist.cpp
    src/shared/options.cpp
    src/shared/potential.cpp
    src/shared/renderhook.cpp
    src/shared/samplegrid.cpp
    src/shared/shadowcaching.cpp
    src/shared/softids.cpp
    src/shared/stratification.cpp
    src/shared/writevrml.cpp
    src/IMAGE/adaptation.cpp
    src/IMAGE/dkcolor.cpp
    src/IMAGE/tonemap/dummy.cpp
    src/IMAGE/imagec.cpp
    src/IMAGE/tonemap/lightness.cpp
    src/IMAGE/pic.cpp
    src/IMAGE/ppm.cpp
    src/IMAGE/tonemap/tonemapping.cpp
    src/IMAGE/tonemap/trwf.cpp
    src/GALERKIN/basisgalerkin.cpp
    src/GALERKIN/basisquadgalerkin.cpp
    src/GALERKIN/basistrigalerkin.cpp
    src/GALERKIN/clustergalerkincpp.cpp
    src/GALERKIN/elementgalerkin.cpp
    src/GALERKIN/formfactor.cpp
    src/GALERKIN/GalerkinRadiosity.cpp
    src/GALERKIN/gathering.cpp
    src/GALERKIN/hierefine.cpp
    src/GALERKIN/initiallinking.cpp
    src/GALERKIN/interaction.cpp
    src/GALERKIN/mrvisibility.cpp
    src/GALERKIN/scratch.cpp
    src/GALERKIN/shaftculling.cpp
    src/GALERKIN/shooting.cpp
    src/io/mgf/badarg.cpp
    src/io/mgf/context.cpp
    src/io/mgf/fvect.cpp
    src/io/mgf/lookup.cpp
    src/io/mgf/object.cpp
    src/io/mgf/parser.cpp
    src/io/mgf/words.cpp
    src/io/mgf/xf.cpp
    src/io/mgf/readmgf.cpp
    src/raycasting/common/bidiroptions.cpp
    src/raycasting/common/ScreenBuffer.cpp
    src/raycasting/common/pathnode.cpp
    src/raycasting/common/pixelfilter.cpp
    src/raycasting/common/raytools.cpp
    src/raycasting/common/rmoptions.cpp
    src/raycasting/common/Raytracer.cpp
    src/raycasting/simple/RayCaster.cpp
    src/raycasting/simple/RayMatter.cpp
    src/raycasting/raytracing/BidirectionalPathRaytracer.cpp
    src/raycasting/raytracing/bipath.cpp
    src/raycasting/raytracing/bsdfcompsampler.cpp
    src/raycasting/raytracing/bsdfsampler.cpp
    src/raycasting/raytracing/densitybuffer.cpp
    src/raycasting/raytracing/densitykernel.cpp
    src/raycasting/raytracing/eyesampler.cpp
    src/raycasting/raytracing/flagchain.cpp
    src/raycasting/raytracing/lightdirsampler.cpp
    src/raycasting/raytracing/lightsampler.cpp
    src/raycasting/raytracing/pixelsampler.cpp
    src/raycasting/raytracing/rtsoptions.cpp
    src/raycasting/raytracing/sampler.cpp
    src/raycasting/raytracing/samplertools.cpp
    src/raycasting/raytracing/screeniterate.cpp
    src/raycasting/raytracing/spar.cpp
    src/raycasting/raytracing/specularsampler.cpp
    src/PHOTONMAP/importancemap.cpp
    src/PHOTONMAP/photon.cpp
    src/PHOTONMAP/photonkdtree.cpp
    src/PHOTONMAP/photonmap.cpp
    src/PHOTONMAP/photonmapsampler.cpp
    src/PHOTONMAP/PhotonMapRadiosity.cpp
    src/PHOTONMAP/pmapimportance.cpp
    src/PHOTONMAP/pmapoptions.cpp
    src/PHOTONMAP/screensampler.cpp
    src/PHOTONMAP/ui_pmap.cpp
    src/raycasting/stochasticRaytracing/basismcrad.cpp
    src/raycasting/stochasticRaytracing/basisquadmcrad.cpp
    src/raycasting/stochasticRaytracing/basistrimcrad.cpp
    src/raycasting/stochasticRaytracing/ccr.cpp
    src/raycasting/stochasticRaytracing/coefficientsgalerkin.cpp
    src/raycasting/stochasticRaytracing/elementmcrad.cpp
    src/raycasting/stochasticRaytracing/hierarchy.cpp
    src/raycasting/stochasticRaytracing/localline.cpp
    src/raycasting/stochasticRaytracing/mcrad.cpp
    src/raycasting/stochasticRaytracing/nondiff.cpp
    src/raycasting/stochasticRaytracing/pushpull.cpp
    src/raycasting/stochasticRaytracing/RandomWalkRadiosity.cpp
    src/raycasting/stochasticRaytracing/hierarchyRefine.cpp
    src/raycasting/stochasticRaytracing/render.cpp
    src/raycasting/stochasticRaytracing/StochasticRaytracer.cpp
    src/raycasting/stochasticRaytracing/rtstochasticphotonmap.cpp
    src/raycasting/stochasticRaytracing/sample4d.cpp
    src/raycasting/stochasticRaytracing/stochjacobi.cpp
    src/raycasting/stochasticRaytracing/StochasticRelaxationRadiosity.cpp
    src/raycasting/stochasticRaytracing/tracepath.cpp
    src/raycasting/stochasticRaytracing/vrml/vrml.cpp
    src/app/batch.cpp
    src/app/radiance.cpp
    src/app/rendercommon.cpp
    src/app/ui_file.cpp
    src/app/ui_main.cpp
    src/app/opengl.cpp
    src/app/Cluster.cpp
    src/app/main.cpp
)
add_executable(rpk ${MAIN_SRC})

target_link_libraries(rpk GLU GL OSMesa)
